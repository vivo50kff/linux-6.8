#!/bin/busybox sh

echo "=== Yat_Casched 测试环境启动成功 ==="
echo "内核版本: $(busybox uname -r)"

# 挂载基本文件系统
/bin/busybox mount -t proc proc /proc
/bin/busybox mount -t sysfs sysfs /sys  
/bin/busybox mount -t devtmpfs devtmpfs /dev

# 安装 busybox 命令
/bin/busybox --install -s

echo ""
echo "🎯 Yat_Casched 调度器测试环境"
echo "================================"
echo "内核: $(uname -r)"
echo "调度器: Yat_Casched (Cache-Aware Scheduler)"
echo ""

echo "📋 可用的测试程序："
echo "=== 核心功能测试 ==="
echo "1. test_yat_core_functions     - 调度器核心功能测试"
echo "2. test_yat_hash_operations    - 哈希表/历史表 CRUD 测试"
echo ""
echo "=== 性能和兼容性测试 ==="
echo "3. test_yat_casched_complete   - 完整调度器测试"
echo "4. test_cache_aware_fixed      - 缓存感知测试"  
echo "5. verify_real_scheduling      - 实时调度验证"
echo ""

echo "📋 基本命令："
echo "- ps        : 查看进程"
echo "- top       : 系统监控"
echo "- uptime    : 系统运行时间"
echo "- free      : 内存使用情况"
echo "- cat /proc/version : 详细内核信息"
echo "- exit      : 退出"
echo ""

echo "🚀 快速测试："
echo "# 核心功能测试"
echo "test_yat_core_functions"
echo "test_yat_hash_operations"
echo ""
echo "# 完整测试套件"
echo "test_yat_casched_complete"
echo "test_cache_aware_fixed"  
echo "verify_real_scheduling"
echo ""

echo "=== 进入交互式 shell ==="
exec /bin/busybox sh
