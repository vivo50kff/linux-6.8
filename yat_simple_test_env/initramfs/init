#!/bin/sh

echo "=== YAT_CASCHED 简化测试环境启动 ==="

# 挂载基本文件系统
mount -t proc none /proc 2>/dev/null || true
mount -t sysfs none /sys 2>/dev/null || true

echo "系统信息:"
echo "内核版本: $(uname -r)"
if [ -f /proc/cpuinfo ]; then
    echo "CPU信息: $(cat /proc/cpuinfo | grep 'model name' | head -1 | cut -d':' -f2)"
    echo "CPU核心数: $(nproc 2>/dev/null || echo '1')"
else
    echo "CPU信息: 不可用"
    echo "CPU核心数: 1"
fi

echo ""
echo "开始YAT_CASCHED调度器测试..."
echo "----------------------------------------"

# 运行测试程序
/bin/yat_simple_test

echo "----------------------------------------"
echo "测试完成"

echo ""
echo "系统将保持运行状态，您可以手动测试其他功能"
echo "输入 'exit' 或按 Ctrl+C 结束"

# 启动简单的shell
exec /bin/sh
